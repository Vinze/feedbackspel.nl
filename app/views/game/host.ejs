<!DOCTYPE html>
<html lang="nl">
<head>
	<title>Feedbackspel.nl</title>
	<link rel="stylesheet" href="/css/font-awesome.min.css" type="text/css">
	<link rel="stylesheet" href="/css/stylesheet.css" type="text/css">
	<link rel="shortcut icon" href="/favicon.png">
</head>
<body class="ingame host">
<% include ../includes/sidebar %>
<div class="site-wrapper" id="game">
	<!-- The game will be rendered here -->
</div>
<% include ../includes/scripts %>

<script type="text/javascript" src="/js/libs/underscore.min.js"></script>
<script type="text/javascript" src="/js/libs/cookies.min.js"></script>
<script type="text/javascript" src="/socket.io/socket.io.js"></script>

<script type="text/template" id="game-tpl">
	<ul class="actions">
		<li>
			{{#if fullscreen}}
				<a on-click="exitFullscreen">
					<i class="fa fa-flip-horizontal fa-compress" ></i>
				</a>
			{{else}}
				<a on-click="enterFullscreen">
					<i class="fa fa-flip-horizontal fa-expand"></i>
				</a>
			{{/if}}
		</li>
	</ul>

	{{#if step == 1}}
		<div class="game-title" intro-outro="fly:{ x: 0, y: -100 }">Voer je feedback in</div>
	{{/if}}
	{{#if step == 2}}
		<div class="game-title" intro-outro="fly:{ x: 0, y: -100 }">Resultaten</div>
	{{/if}}

	{{#if step == 1}}
		<div class="step card" intro-outro="fade">
			<h1>{{card}}</h1>
		</div>
	{{/if}}

	{{#if step == 2}}
		<div class="step results" intro-outro="fade">
			<h1>{{card}}:</h1>
			{{#each results:i}}
				<div class="result clearfix">
					<div class="position">{{i+1}}</div>
					<div class="avatar"><img src="/avatar/{{_id}}.png"></div>
					<div class="name">{{firstname}} {{lastname}}</div>
					<div class="stars">
						<i class="fa fa-star{{Math.round(rating / ( players.length - 1)) >= 1 ? '' : '-o'}} rating"></i>
						<i class="fa fa-star{{Math.round(rating / ( players.length - 1)) >= 2 ? '' : '-o'}} rating"></i>
						<i class="fa fa-star{{Math.round(rating / ( players.length - 1)) >= 3 ? '' : '-o'}} rating"></i>
						<i class="fa fa-star{{Math.round(rating / ( players.length - 1)) >= 4 ? '' : '-o'}} rating"></i>
						<i class="fa fa-star{{Math.round(rating / ( players.length - 1)) >= 5 ? '' : '-o'}} rating"></i>
					</div>
				</div>
			{{/each}}
			<button class="btn confirm" on-click="next">
				Volgende ronde <i class="fa fa-angle-double-right"></i>
			</button>
		</div>
	{{/if}}

	{{#if step == 3}}
		<div class="step end" intro-outro="fade">
			EINDE!
		</div>
	{{/if}}

	{{#if step == 1}}
		<div class="players-list">
			<ul>
				{{#each players}}
					<li class="player {{status}}" intro-outro="fly:{ x: 0, y: 150 }">
						{{#if step == 2}}
							<i class="fa fa-check check"></i>
						{{/if}}
						<div class="name">
							{{firstname}} {{lastname}}
							<a href="#" class="remove" on-click="remove:{{this}}">
								<i class="fa fa-times"></i>
							</a>
						</div>
						<div class="avatar">
							<img src="/avatar/{{_id}}.png">
						</div>
					</li>
				{{/each}}
			</ul>
		</div>
	{{/if}}

	<div class="restart">
		<a href="#" on-click="restart">Restart</a>
	</div>
</script>

<script type="text/javascript" src="/js/host.js"></script>